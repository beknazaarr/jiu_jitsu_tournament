{% extends 'base.html' %}
{% block title %}{{ tournament.name }}{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="mb-8">
    <h1 class="text-4xl font-bold mb-2 text-blue-400">{{ tournament.name }}</h1>
    {% if tournament.registration_open %}
    <span class="inline-block bg-green-500 text-white text-sm px-3 py-1 rounded-full">
        ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞
    </span>
    {% else %}
    <span class="inline-block bg-gray-600 text-gray-300 text-sm px-3 py-1 rounded-full">
        ‚ùå –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞
    </span>
    {% endif %}
</div>

<!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
<div class="grid md:grid-cols-2 gap-6 mb-8">
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
        <h2 class="text-xl font-semibold mb-4 text-blue-300">üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div class="space-y-3 text-gray-300">
            <p><strong class="text-gray-400">–î–∞—Ç–∞:</strong> {{ tournament.date|date:"d E Y" }}</p>
            <p><strong class="text-gray-400">–ú–µ—Å—Ç–æ:</strong> {{ tournament.location }}</p>
            <p><strong class="text-gray-400">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</strong> {{ total_athletes }}</p>
            <p><strong class="text-gray-400">–ö–∞—Ç–µ–≥–æ—Ä–∏–π:</strong> {{ categories.count }}</p>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
        <h2 class="text-xl font-semibold mb-4 text-blue-300">üìù –û–ø–∏—Å–∞–Ω–∏–µ</h2>
        {% if tournament.description %}
        <p class="text-gray-300">{{ tournament.description }}</p>
        {% else %}
        <p class="text-gray-500 italic">–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
        {% endif %}
    </div>
</div>

<!-- –ü—Ä–∞–≤–∏–ª–∞ -->
{% if tournament.rules %}
<div class="bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700">
    <h2 class="text-xl font-semibold mb-4 text-blue-300">‚öñÔ∏è –ü—Ä–∞–≤–∏–ª–∞ —Ç—É—Ä–Ω–∏—Ä–∞</h2>
    <div class="text-gray-300 whitespace-pre-line">{{ tournament.rules }}</div>
</div>
{% endif %}

<!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
<div class="bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700">
    <h2 class="text-xl font-semibold mb-4 text-blue-300">üéØ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞</h2>
    
    {% if categories %}
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for category in categories %}
        <div class="bg-gray-700 rounded p-4 border border-gray-600">
            <h3 class="font-semibold text-blue-200 mb-2">{{ category.name }}</h3>
            <div class="text-sm text-gray-300 space-y-1">
                <p>–ü–æ–ª: {{ category.get_gender_display }}</p>
                <p>–í–æ–∑—Ä–∞—Å—Ç: {{ category.age_min }}-{{ category.age_max }} –ª–µ—Ç</p>
                <p>–í–µ—Å: {{ category.weight_min }}-{{ category.weight_max }} –∫–≥</p>
                <p>–£—Ä–æ–≤–µ–Ω—å: {{ category.get_level_display }}</p>
                <p class="text-green-400 font-semibold mt-2">
                    –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {{ category.athletes.count }}
                </p>
            </div>
            <a href="{% url 'athlete:category_list' category.id %}" 
               class="block mt-3 text-center bg-blue-600 hover:bg-blue-500 text-white py-1 px-3 rounded text-sm transition">
                –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-500">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% endif %}
</div>

<!-- –î–µ–π—Å—Ç–≤–∏—è -->
<div class="flex gap-4">
    <a href="{% url 'tournament:categories' tournament.id %}" 
       class="bg-blue-600 hover:bg-blue-500 text-white py-3 px-6 rounded-lg transition font-semibold">
        üìä –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏
    </a>
    <a href="{% url 'tournament:schedule' tournament.id %}" 
       class="bg-purple-600 hover:bg-purple-500 text-white py-3 px-6 rounded-lg transition font-semibold">
        üïê –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–æ—ë–≤
    </a>
    <a href="{% url 'tournament:list' %}" 
       class="bg-gray-700 hover:bg-gray-600 text-white py-3 px-6 rounded-lg transition">
        ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
    </a>
</div>
{% endblock %}