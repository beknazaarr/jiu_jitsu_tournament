{% extends 'base.html' %}
{% block title %}–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: {{ tournament.name }}{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="mb-8">
    <h1 class="text-3xl font-bold mb-2 text-blue-400">
        üïê –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞: {{ tournament.name }}
    </h1>
    <p class="text-gray-400">{{ tournament.date|date:"d E Y" }} ‚Ä¢ {{ tournament.location }}</p>
</div>

<!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –º–∞—Ç–∞–º -->
{% if mats %}
<div class="space-y-6">
    {% for mat_number, schedules in mats.items %}
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
        <h2 class="text-2xl font-semibold text-blue-300 mb-4">
            –ú–∞—Ç {{ mat_number }}
        </h2>
        
        <div class="space-y-3">
            {% for schedule in schedules %}
            <div class="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-blue-500 transition">
                <div class="flex justify-between items-start">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ–µ -->
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded">
                                {{ schedule.scheduled_time|date:"H:i" }}
                            </span>
                            <span class="text-gray-400 text-sm">
                                –ë–æ–π #{{ schedule.match.match_number }}
                            </span>
                            <span class="text-gray-500 text-sm">
                                {{ schedule.match.get_round_display }}
                            </span>
                        </div>
                        
                        <div class="mb-2">
                            <p class="text-sm text-gray-400 mb-1">
                                {{ schedule.match.grid.category.name }}
                            </p>
                            <p class="text-white font-semibold">
                                {{ schedule.match.athlete1.full_name }}
                                <span class="text-gray-400 mx-2">vs</span>
                                {% if schedule.match.athlete2 %}
                                    {{ schedule.match.athlete2.full_name }}
                                {% else %}
                                    <span class="text-gray-500">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è</span>
                                {% endif %}
                            </p>
                        </div>
                        
                        <p class="text-xs text-gray-500">
                            –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {{ schedule.duration_minutes }} –º–∏–Ω
                        </p>
                    </div>
                    
                    <!-- –°—Ç–∞—Ç—É—Å -->
                    <div class="ml-4">
                        {% if schedule.is_finished %}
                        <span class="bg-gray-600 text-white text-xs px-3 py-1 rounded-full">
                            ‚úì –ó–∞–≤–µ—Ä—à—ë–Ω
                        </span>
                        {% elif schedule.is_started %}
                        <span class="bg-green-500 text-white text-xs px-3 py-1 rounded-full animate-pulse">
                            ‚ñ∂ –ò–¥—ë—Ç
                        </span>
                        {% else %}
                        <span class="bg-blue-500 text-white text-xs px-3 py-1 rounded-full">
                            ‚è≥ –û–∂–∏–¥–∞–µ—Ç—Å—è
                        </span>
                        {% endif %}
                    </div>
                </div>
                
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç (–µ—Å–ª–∏ –±–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω) -->
                {% if schedule.match.is_completed %}
                <div class="mt-3 pt-3 border-t border-gray-600">
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-400">–†–µ–∑—É–ª—å—Ç–∞—Ç:</span>
                        <span class="text-white font-semibold">
                            {{ schedule.match.score_athlete1 }} : {{ schedule.match.score_athlete2 }}
                        </span>
                        <span class="text-green-400 font-semibold">
                            –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {{ schedule.match.winner.last_name }}
                        </span>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="bg-gray-800 rounded-lg p-12 text-center border border-gray-700">
    <p class="text-gray-500 text-lg mb-2">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</p>
    <p class="text-gray-600 text-sm">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –Ω–∞ —Å–∞–π—Ç–µ</p>
</div>
{% endif %}

<!-- –õ–µ–≥–µ–Ω–¥–∞ -->
<div class="mt-8 bg-gray-800 rounded-lg p-6 border border-gray-700">
    <h3 class="text-lg font-semibold text-blue-300 mb-3">–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è</h3>
    <div class="flex gap-6 text-sm">
        <div class="flex items-center gap-2">
            <span class="bg-blue-500 text-white text-xs px-3 py-1 rounded-full">‚è≥ –û–∂–∏–¥–∞–µ—Ç—Å—è</span>
            <span class="text-gray-400">–ë–æ–π –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è</span>
        </div>
        <div class="flex items-center gap-2">
            <span class="bg-green-500 text-white text-xs px-3 py-1 rounded-full">‚ñ∂ –ò–¥—ë—Ç</span>
            <span class="text-gray-400">–ë–æ–π –∏–¥—ë—Ç —Å–µ–π—á–∞—Å</span>
        </div>
        <div class="flex items-center gap-2">
            <span class="bg-gray-600 text-white text-xs px-3 py-1 rounded-full">‚úì –ó–∞–≤–µ—Ä—à—ë–Ω</span>
            <span class="text-gray-400">–ë–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω</span>
        </div>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
<div class="mt-6">
    <a href="{% url 'tournament:detail' tournament.id %}" 
       class="inline-block bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded transition">
        ‚Üê –ù–∞–∑–∞–¥ –∫ —Ç—É—Ä–Ω–∏—Ä—É
    </a>
</div>
{% endblock %}