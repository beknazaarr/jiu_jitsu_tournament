{% extends 'base.html' %}
{% block title %}–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: {{ athlete.full_name }}{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="mb-8">
    <h1 class="text-3xl font-bold mb-2 text-blue-400">
        üïê –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–æ—ë–≤: {{ athlete.full_name }}
    </h1>
    <p class="text-gray-400">{{ athlete.tournament.name }}</p>
</div>

<!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
<div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
    {% if schedules %}
    <div class="space-y-4">
        {% for schedule in schedules %}
        <div class="bg-gray-700 rounded-lg p-5 border border-gray-600">
            <div class="flex justify-between items-start mb-3">
                <div>
                    <h3 class="text-lg font-semibold text-white mb-1">
                        –ë–æ–π #{{ schedule.match.match_number }}
                    </h3>
                    <p class="text-sm text-gray-400">
                        {{ schedule.match.get_round_display }} ‚Ä¢ {{ schedule.match.grid.category.name }}
                    </p>
                </div>
                <div class="text-right">
                    {% if schedule.is_finished %}
                    <span class="bg-gray-600 text-white text-xs px-3 py-1 rounded-full">
                        ‚úì –ó–∞–≤–µ—Ä—à—ë–Ω
                    </span>
                    {% elif schedule.is_started %}
                    <span class="bg-green-500 text-white text-xs px-3 py-1 rounded-full animate-pulse">
                        ‚ñ∂ –ò–¥—ë—Ç —Å–µ–π—á–∞—Å
                    </span>
                    {% else %}
                    <span class="bg-blue-500 text-white text-xs px-3 py-1 rounded-full">
                        ‚è≥ –û–∂–∏–¥–∞–µ—Ç—Å—è
                    </span>
                    {% endif %}
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-800 rounded p-3">
                    <p class="text-gray-400 text-sm mb-1">–°–ø–æ—Ä—Ç—Å–º–µ–Ω 1</p>
                    <p class="text-white font-semibold">
                        {{ schedule.match.athlete1.full_name }}
                        {% if schedule.match.athlete1 == athlete %}
                        <span class="text-blue-400">(–í—ã)</span>
                        {% endif %}
                    </p>
                </div>
                <div class="bg-gray-800 rounded p-3">
                    <p class="text-gray-400 text-sm mb-1">–°–ø–æ—Ä—Ç—Å–º–µ–Ω 2</p>
                    <p class="text-white font-semibold">
                        {% if schedule.match.athlete2 %}
                            {{ schedule.match.athlete2.full_name }}
                            {% if schedule.match.athlete2 == athlete %}
                            <span class="text-blue-400">(–í—ã)</span>
                            {% endif %}
                        {% else %}
                            <span class="text-gray-500">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è</span>
                        {% endif %}
                    </p>
                </div>
            </div>
            
            <div class="grid grid-cols-3 gap-3 text-sm">
                <div class="bg-gray-800 rounded p-3 text-center">
                    <p class="text-gray-400 mb-1">–í—Ä–µ–º—è</p>
                    <p class="text-white font-semibold">{{ schedule.scheduled_time|date:"H:i" }}</p>
                </div>
                <div class="bg-gray-800 rounded p-3 text-center">
                    <p class="text-gray-400 mb-1">–ú–∞—Ç</p>
                    <p class="text-white font-semibold">{{ schedule.mat_number }}</p>
                </div>
                <div class="bg-gray-800 rounded p-3 text-center">
                    <p class="text-gray-400 mb-1">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
                    <p class="text-white font-semibold">{{ schedule.duration_minutes }} –º–∏–Ω</p>
                </div>
            </div>
            
            {% if schedule.match.is_completed %}
            <div class="mt-4 pt-4 border-t border-gray-600">
                <p class="text-sm text-gray-400 mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç:</p>
                <div class="flex justify-between items-center">
                    <p class="text-white">
                        <span class="font-semibold">{{ schedule.match.score_athlete1 }}</span>
                        <span class="text-gray-400 mx-2">:</span>
                        <span class="font-semibold">{{ schedule.match.score_athlete2 }}</span>
                    </p>
                    <p class="text-green-400 font-semibold">
                        –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {{ schedule.match.winner.full_name }}
                    </p>
                </div>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-12">
        <p class="text-gray-500 text-lg">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</p>
        <p class="text-gray-600 text-sm mt-2">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏</p>
    </div>
    {% endif %}
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
<div class="mt-6">
    <a href="{% url 'athlete:profile' athlete.id %}" 
       class="inline-block bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded transition">
        ‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–∏–ª—é
    </a>
</div>
{% endblock %}