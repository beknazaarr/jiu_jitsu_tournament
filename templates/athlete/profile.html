{% extends 'base.html' %}
{% block title %}–ü—Ä–æ—Ñ–∏–ª—å: {{ athlete.full_name }}{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="mb-8">
    <h1 class="text-4xl font-bold mb-2 text-blue-400">{{ athlete.full_name }}</h1>
    <p class="text-gray-400">–¢—É—Ä–Ω–∏—Ä: {{ athlete.tournament.name }}</p>
</div>

<div class="grid lg:grid-cols-3 gap-6 mb-8">
    <!-- –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="lg:col-span-1">
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="space-y-3 text-sm">
                <div>
                    <p class="text-gray-400">–ò–º—è</p>
                    <p class="text-white font-semibold">{{ athlete.first_name }}</p>
                </div>
                <div>
                    <p class="text-gray-400">–§–∞–º–∏–ª–∏—è</p>
                    <p class="text-white font-semibold">{{ athlete.last_name }}</p>
                </div>
                {% if athlete.middle_name %}
                <div>
                    <p class="text-gray-400">–û—Ç—á–µ—Å—Ç–≤–æ</p>
                    <p class="text-white font-semibold">{{ athlete.middle_name }}</p>
                </div>
                {% endif %}
                <div>
                    <p class="text-gray-400">–í–æ–∑—Ä–∞—Å—Ç</p>
                    <p class="text-white font-semibold">{{ athlete.age }} –ª–µ—Ç</p>
                </div>
                <div>
                    <p class="text-gray-400">–ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è</p>
                    <p class="text-white font-semibold">{{ athlete.birth_year }}</p>
                </div>
                <div>
                    <p class="text-gray-400">–ü–æ–ª</p>
                    <p class="text-white font-semibold">{{ athlete.get_gender_display }}</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="lg:col-span-2 space-y-6">
        <!-- –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">ü•ã –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
            <div class="grid md:grid-cols-3 gap-4 text-sm">
                <div>
                    <p class="text-gray-400">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</p>
                    <p class="text-white font-semibold">{{ athlete.category.name }}</p>
                </div>
                <div>
                    <p class="text-gray-400">–í–µ—Å</p>
                    <p class="text-white font-semibold">{{ athlete.weight }} –∫–≥</p>
                </div>
                <div>
                    <p class="text-gray-400">–®–∫–æ–ª–∞/–ó–∞–ª</p>
                    <p class="text-white font-semibold">{{ athlete.school }}</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-gray-700 rounded p-4 text-center">
                    <p class="text-3xl font-bold text-green-400">{{ wins }}</p>
                    <p class="text-gray-400 text-sm mt-1">–ü–æ–±–µ–¥</p>
                </div>
                <div class="bg-gray-700 rounded p-4 text-center">
                    <p class="text-3xl font-bold text-red-400">{{ losses }}</p>
                    <p class="text-gray-400 text-sm mt-1">–ü–æ—Ä–∞–∂–µ–Ω–∏–π</p>
                </div>
                <div class="bg-gray-700 rounded p-4 text-center">
                    <p class="text-3xl font-bold text-blue-400">{{ total_matches }}</p>
                    <p class="text-gray-400 text-sm mt-1">–í—Å–µ–≥–æ –±–æ—ë–≤</p>
                </div>
                <div class="bg-gray-700 rounded p-4 text-center">
                    <p class="text-3xl font-bold text-yellow-400">{{ win_rate|floatformat:0 }}%</p>
                    <p class="text-gray-400 text-sm mt-1">–í–∏–Ω—Ä–µ–π—Ç</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –±–æ–∏ -->
{% if upcoming_matches %}
<div class="bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700">
    <h2 class="text-xl font-semibold mb-4 text-blue-300">‚è∞ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –±–æ–∏</h2>
    <div class="space-y-3">
        {% for match in upcoming_matches %}
        <div class="bg-gray-700 rounded p-4 border border-gray-600">
            <div class="flex justify-between items-center">
                <div>
                    <p class="font-semibold text-white">
                        {{ match.athlete1.full_name }} 
                        <span class="text-gray-400">vs</span> 
                        {% if match.athlete2 %}
                            {{ match.athlete2.full_name }}
                        {% else %}
                            <span class="text-gray-500">TBD</span>
                        {% endif %}
                    </p>
                    <p class="text-sm text-gray-400 mt-1">
                        {{ match.get_round_display }} ‚Ä¢ –ë–æ–π #{{ match.match_number }}
                    </p>
                </div>
                {% if match.schedule %}
                <div class="text-right">
                    <p class="text-blue-400 font-semibold">–ú–∞—Ç {{ match.schedule.mat_number }}</p>
                    <p class="text-sm text-gray-400">{{ match.schedule.scheduled_time|date:"H:i" }}</p>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- –ò—Å—Ç–æ—Ä–∏—è –±–æ—ë–≤ -->
<div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
    <h2 class="text-xl font-semibold mb-4 text-blue-300">üéØ –ò—Å—Ç–æ—Ä–∏—è –±–æ—ë–≤</h2>
    
    {% if matches %}
    <div class="space-y-3">
        {% for match in matches %}
        <div class="bg-gray-700 rounded p-4 border border-gray-600 {% if not match.is_completed %}opacity-50{% endif %}">
            <div class="flex justify-between items-start">
                <div class="flex-1">
                    <p class="font-semibold text-white mb-1">
                        {{ match.athlete1.full_name }} 
                        <span class="text-gray-400">vs</span> 
                        {% if match.athlete2 %}
                            {{ match.athlete2.full_name }}
                        {% else %}
                            <span class="text-gray-500">TBD</span>
                        {% endif %}
                    </p>
                    <p class="text-sm text-gray-400">
                        {{ match.get_round_display }} ‚Ä¢ –ë–æ–π #{{ match.match_number }}
                    </p>
                    
                    {% if match.is_completed %}
                    <div class="mt-2 text-sm">
                        <span class="text-gray-400">–°—á—ë—Ç:</span>
                        <span class="text-white font-semibold ml-2">
                            {{ match.score_athlete1 }} : {{ match.score_athlete2 }}
                        </span>
                        {% if match.result_type %}
                        <span class="text-gray-400 ml-3">–ü–æ–±–µ–¥–∞: {{ match.get_result_type_display }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                
                <div class="text-right">
                    {% if match.is_completed %}
                        {% if match.winner == athlete %}
                        <span class="bg-green-500 text-white text-xs px-3 py-1 rounded-full font-semibold">
                            ‚úì –ü–æ–±–µ–¥–∞
                        </span>
                        {% elif match.winner %}
                        <span class="bg-red-500 text-white text-xs px-3 py-1 rounded-full font-semibold">
                            ‚úó –ü–æ—Ä–∞–∂–µ–Ω–∏–µ
                        </span>
                        {% else %}
                        <span class="bg-gray-500 text-white text-xs px-3 py-1 rounded-full">
                            –ù–∏—á—å—è
                        </span>
                        {% endif %}
                    {% else %}
                    <span class="bg-blue-500 text-white text-xs px-3 py-1 rounded-full">
                        –û–∂–∏–¥–∞–µ—Ç—Å—è
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-500 text-center py-8">–ò—Å—Ç–æ—Ä–∏—è –±–æ—ë–≤ –ø—É—Å—Ç–∞</p>
    {% endif %}
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
<div class="mt-6">
    <a href="{% url 'tournament:detail' athlete.tournament.id %}" 
       class="inline-block bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded transition">
        ‚Üê –ù–∞–∑–∞–¥ –∫ —Ç—É—Ä–Ω–∏—Ä—É
    </a>
</div>
{% endblock %}